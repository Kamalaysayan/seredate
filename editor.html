<!DOCTYPE html>
<html>
<head>
  <title>Editor</title>
  <style>
    /* ... your styles ... */
    #link-input {
      display: none; /* Initially hide the input field */
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Editor</h2>
    <input type="text" id="link-input" placeholder="Paste Google Drive link">
    <button onclick="addLink()">Add Link</button>
    <div id="links-display"></div>
    <button onclick="showInput()">Add Link</button>
    <button onclick="doneAdding()">Done</button>
  </div>

  <script>
    const linkInput = document.getElementById('link-input');
    const linksDisplay = document.getElementById('links-display');
    let links = [];

    // Function to load links from local storage on page load
    window.addEventListener('DOMContentLoaded', (event) => {
      fetchLinks();
    });

    function fetchLinks() {
        fetch('/data.json')
            .then(response => response.json())
            .then(data => {
                links = data;
                displayLinks();
            });
    }

    function displayLinks() {
        linksDisplay.innerHTML = '';
        links.forEach(linkObj => {
            const linkContainer = document.createElement('div');
            linkContainer.className = 'link-container';
            linkContainer.textContent = linkObj.link;
            linksDisplay.appendChild(linkContainer);
        });
    }

    function showInput() {
      linkInput.style.display = 'block';
    }

    function addLink() {
      const link = linkInput.value;

      fetch('/.netlify/functions/update-links', {
        method: 'POST',
        body: JSON.stringify({ link: link })
      })
      .then(response => response.json())
      .then(newLink => {
        links.push(newLink); // Update the links array with the new link from server
        displayLinks(); // Update the display
        linkInput.value = '';
        linkInput.style.display = 'none';
      })
      .catch(error => console.error("Error adding link:", error));
    }

    function doneAdding() {
      // Redirect back to the editor's homepage
      window.location.href = "editor.html"; // Replace with your actual homepage URL
    }
  </script>
</body>
</html>