<!DOCTYPE html>
<html>
<head>
  <title>Customer</title>
  <style>
    .pink-container {
      background-color: pink;
      padding: 10px;
      margin: 5px;
      display: inline-block;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Customer</h2>
    <div id="containers-display"></div>
  </div>

  <script>
    const containersDisplay = document.getElementById('containers-display');
    let links = [];

    window.addEventListener('DOMContentLoaded', () => {
      fetchLinks();

      const broadcast = new BroadcastChannel('newLink');
      broadcast.onmessage = (event) => {
        links.push(event.data);
        displayLinks();
      };
    });

    function fetchLinks() {
      fetch('/data.json')
        .then(response => response.json())
        .then(data => {
          links = data;
          displayLinks();
        });
    }

    function displayLinks() {
      containersDisplay.innerHTML = '';
      links.forEach((linkObj, index) => {
        const container = document.createElement('div');
        container.className = 'pink-container';
        container.textContent = linkObj.link || (index + 1);
        container.addEventListener('click', () => {
          const password = prompt("Enter password for this link:");
          if (password === linkObj.password) {
            window.open(linkObj.link, '_blank');
          } else {
            alert("Incorrect password.");
          }
        });

        containersDisplay.appendChild(container);
      });
    }
  </script>
</body>
</html>